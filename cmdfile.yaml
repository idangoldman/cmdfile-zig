# Example cmdfile configuration

# Global variables that can be used in tasks
variables:
  PROJECT_NAME: "cmdfile"
  BUILD_DIR: "zig-out"
  VERSION: "0.1.0"

# Define tasks
tasks:
  - name: hello
    description: "Dude"
    command: "echo 'HELLO WORLD'"

  # Build task
  - name: build
    description: "Build the project"
    command: "zig build"

  # Test task
  - name: test
    description: "Run all tests"
    command: "zig build test"

  # Clean task
  - name: clean
    description: "Clean build artifacts"
    command: "rm -rf zig-out zig-cache"

  # Development build with debug symbols
  - name: build-debug
    description: "Build with debug symbols"
    command: "zig build -Doptimize=Debug"

  # Release build
  - name: build-release
    description: "Build optimized release"
    command: "zig build -Doptimize=ReleaseFast"
    dependencies:
      - test

  # Install task
  - name: install
    description: "Install the binary"
    command: "zig build install --prefix ~/.local"
    dependencies:
      - build-release

  # Format code
  - name: format
    description: "Format source code"
    command: "zig fmt src/ test/"

  # Check code formatting
  - name: check-format
    description: "Check if code is properly formatted"
    command: "zig fmt --check src/ test/"

  # Run a specific test
  - name: test-cli
    description: "Run CLI tests only"
    command: "zig test test/cli_test.zig"

  # Development workflow - format, test, build
  - name: dev
    description: "Development workflow: format, test, and build"
    dependencies:
      - format
      - test
      - build-debug

  # Full workflow for releases
  - name: release
    description: "Full release workflow"
    dependencies:
      - check-format
      - test
      - build-release
